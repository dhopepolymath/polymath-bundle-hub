<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Login - PolymathBundleHub</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://accounts.google.com/gsi/client" async defer></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
</head>
<body class="auth-page">
    <div class="auth-container">
        <div class="auth-header">
            <h2 class="auth-title" id="auth-title">Welcome Back</h2>
            <p class="auth-subtitle" id="auth-subtitle">Please enter your details to sign in.</p>
        </div>

        <form id="login-form">
            <div class="form-group" id="name-group" style="display: none;">
                <label class="form-label" for="name">Full Name</label>
                <input type="text" id="name" class="form-input" placeholder="John Doe">
            </div>
            <div class="form-group">
                <label class="form-label" for="email">Email Address</label>
                <input type="email" id="email" class="form-input" placeholder="name@example.com" required>
            </div>
            <div class="form-group">
                <label class="form-label" for="password">Password</label>
                <input type="password" id="password" class="form-input" placeholder="••••••••" required>
            </div>
            <button type="submit" class="btn btn-primary" style="width: 100%; justify-content: center; padding: 0.85rem; border-radius: 12px; font-weight: 700;">Sign In</button>
        </form>

        <div class="auth-divider">
            <span>OR</span>
        </div>

        <div id="g_id_onload"
              data-client_id="467182904845-4h70aumpqvutir4q4f467svkvu085umd.apps.googleusercontent.com"
              data-context="signin"
             data-ux_mode="popup"
             data-callback="handleGoogleResponse"
             data-auto_prompt="true"
             data-auto_select="true"
             data-itp_support="true"
             data-cancel_on_tap_outside="false">
        </div>

        <div class="google-btn-wrapper">
            <div class="g_id_signin"
                 data-type="standard"
                 data-shape="pill"
                 data-theme="outline"
                 data-text="continue_with"
                 data-size="large"
                 data-logo_alignment="left"
                 data-width="100%">
            </div>
        </div>

        <div class="auth-footer">
            <p id="auth-toggle-text">Don't have an account? <a href="#" class="auth-link">Create one</a></p>
        </div>
    </div>

    <script src="app.js?v=4.0"></script>
    <script>
        // Simple toggle for demo purposes
        const toggleLink = document.querySelector('.auth-link');
        let isLogin = true;

        toggleLink.addEventListener('click', (e) => {
            e.preventDefault();
            isLogin = !isLogin;
            
            document.querySelector('#auth-title').textContent = isLogin ? 'Welcome Back' : 'Create Account';
            document.querySelector('#auth-subtitle').textContent = isLogin ? 'Please enter your details to sign in.' : 'Join us today to start getting affordable data bundles.';
            document.querySelector('#login-form button').textContent = isLogin ? 'Sign In' : 'Sign Up';
            document.querySelector('#auth-toggle-text').firstChild.textContent = isLogin ? "Don't have an account? " : "Already have an account? ";
            toggleLink.textContent = isLogin ? 'Create one' : 'Sign in';
            
            const nameGroup = document.querySelector('#name-group');
            if (nameGroup) {
                nameGroup.style.display = isLogin ? 'none' : 'block';
                const nameInput = nameGroup.querySelector('input');
                if (!isLogin) nameInput.setAttribute('required', '');
                else nameInput.removeAttribute('required');
            }
            
            // Hide Google Sign-in on signup page to keep it simple for now
            const googleBtnWrapper = document.querySelector('.google-btn-wrapper');
            const authDivider = document.querySelector('.auth-divider');
            if (googleBtnWrapper) googleBtnWrapper.style.display = isLogin ? 'block' : 'none';
            if (authDivider) authDivider.style.display = isLogin ? 'flex' : 'none';
        });

        // Programmatic prompt to ensure the bubble appears instantly
        window.onload = function () {
            if (window.google && window.google.accounts) {
                google.accounts.id.prompt((notification) => {
                    if (notification.isNotDisplayed() || notification.isSkippedMoment()) {
                        console.log('One Tap display skipped or suppressed');
                    }
                });
            }
        };
    </script>
</body>
</html>
