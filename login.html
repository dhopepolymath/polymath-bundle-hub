<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Login - PolymathBundleHub</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://accounts.google.com/gsi/client" async defer></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
</head>
<body class="auth-page">
    <div class="auth-container">
        <div class="auth-header">
            <h2 class="auth-title" id="auth-title">Welcome Back</h2>
            <p class="auth-subtitle" id="auth-subtitle">Please enter your details to sign in.</p>
        </div>

        <form id="login-form">
            <div class="form-group" id="name-group" style="display: none;">
                <label class="form-label" for="name">Full Name</label>
                <input type="text" id="name" class="form-input" placeholder="John Doe">
            </div>
            <div class="form-group">
                <label class="form-label" for="email">Email Address</label>
                <input type="email" id="email" class="form-input" placeholder="name@example.com" required>
            </div>
            <div class="form-group">
                <label class="form-label" for="password">Password</label>
                <input type="password" id="password" class="form-input" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" required>
            </div>
            <button type="submit" class="btn btn-primary" style="width: 100%; justify-content: center; padding: 0.85rem; border-radius: 12px; font-weight: 700;">Sign In</button>
        </form>

        <div class="auth-divider">
            <span>OR</span>
        </div>

        <div class="social-auth-section">
            <!-- Google Sign In -->
            <div id="g_id_onload"
                  data-client_id="467182904845-4h70aumpqvutir4q4f467svkvu085umd.apps.googleusercontent.com"
                  data-context="signin"
                 data-ux_mode="popup"
                 data-callback="handleGoogleResponse"
                 data-auto_prompt="false">
            </div>
            
            <div class="social-buttons-grid">
                <div class="g_id_signin"
                     data-type="standard"
                     data-shape="rectangular"
                     data-theme="outline"
                     data-text="continue_with"
                     data-size="large"
                     data-logo_alignment="left"
                     data-width="100%">
                </div>

                <button type="button" class="apple-auth-btn" onclick="handleAppleLogin()">
                    <svg viewBox="0 0 384 512" width="18" height="18" fill="currentColor">
                        <path d="M318.7 268.7c-.2-36.7 16.4-64.4 50-84.8-18.8-26.9-47.2-41.7-84.7-44.6-35.5-2.8-74.3 20.7-88.5 20.7-15 0-49.4-19.7-76.4-19.7C63.3 141.2 4 184.8 4 273.5q0 39.3 14.4 81.2c12.8 36.7 59 126.7 107.2 125.2 25.2-.6 43-17.9 75.8-17.9 31.8 0 48.3 17.9 76.4 17.9 48.6-.7 90.4-82.5 102.6-119.3-65.2-30.7-61.7-90-61.7-91.9zm-56.6-164.2c27.3-32.4 24.8-61.9 24-72.5-24.1 1.4-52 16.4-67.9 34.9-17.5 19.8-27.8 44.3-25.6 71.9 26.1 2 49.9-11.4 69.5-34.3z"/>
                    </svg>
                    <span>Continue with Apple</span>
                </button>
            </div>
        </div>

        <div class="auth-footer">
            <p id="auth-toggle-text">Don't have an account? <a href="#" class="auth-link">Create one</a></p>
        </div>
    </div>

    <!-- Mobile Bottom Navigation -->
    <nav class="mobile-bottom-nav">
        <a href="index.html" class="mobile-nav-item">
            <span>üè†</span>
            <span>Home</span>
        </a>
        <a href="bundles.html" class="mobile-nav-item">
            <span>üì¶</span>
            <span>Bundles</span>
        </a>
        <a href="#" class="mobile-nav-item" onclick="showCart(); return false;">
            <span>üõí</span>
            <span>Cart</span>
        </a>
        <a href="login.html" class="mobile-nav-item active" id="mobile-account-link">
            <span>üë§</span>
            <span>Account</span>
        </a>
    </nav>

    <script src="app.js?v=4.1"></script>
    <script>
        // Simple toggle for demo purposes
        const toggleLink = document.querySelector('.auth-link');
        let isLogin = true;

        toggleLink.addEventListener('click', (e) => {
            e.preventDefault();
            isLogin = !isLogin;
            
            document.querySelector('#auth-title').textContent = isLogin ? 'Welcome Back' : 'Create Account';
            document.querySelector('#auth-subtitle').textContent = isLogin ? 'Please enter your details to sign in.' : 'Join us today to start getting affordable data bundles.';
            document.querySelector('#login-form button').textContent = isLogin ? 'Sign In' : 'Sign Up';
            document.querySelector('#auth-toggle-text').firstChild.textContent = isLogin ? "Don't have an account? " : "Already have an account? ";
            toggleLink.textContent = isLogin ? 'Create one' : 'Sign in';
            
            const nameGroup = document.querySelector('#name-group');
            if (nameGroup) {
                nameGroup.style.display = isLogin ? 'none' : 'block';
                const nameInput = nameGroup.querySelector('input');
                if (!isLogin) nameInput.setAttribute('required', '');
                else nameInput.removeAttribute('required');
            }
            
            // Hide Google Sign-in on signup page to keep it simple for now
            const googleBtnWrapper = document.querySelector('.google-btn-wrapper');
            const authDivider = document.querySelector('.auth-divider');
            if (googleBtnWrapper) googleBtnWrapper.style.display = isLogin ? 'block' : 'none';
            if (authDivider) authDivider.style.display = isLogin ? 'flex' : 'none';
        });

        // Programmatic prompt to ensure the bubble appears instantly
        window.onload = function () {
            if (window.google && window.google.accounts) {
                google.accounts.id.prompt((notification) => {
                    if (notification.isNotDisplayed() || notification.isSkippedMoment()) {
                        console.log('One Tap display skipped or suppressed');
                    }
                });
            }
        };
    </script>
</body>
</html>
